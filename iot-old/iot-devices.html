<html lang="en-US"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>TTM4175</title>
<meta property="og:title" content="TTM4175">
<meta property="og:locale" content="en_US">
<meta name="description" content="Introduction to Communication Technology and Digital Security">
<meta property="og:description" content="Introduction to Communication Technology and Digital Security">


<link rel="stylesheet" href="assets/bootstrap.min.css">
<script src="assets/jquery-3.5.1.min.js"></script>
<script src="assets/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="assets/style.css" />
<link rel="stylesheet" type="text/css" href="assets/bootstrap-icons.css">
<style type="text/css">div.factbox {
  width:250px; float: right; margin: 0 15px 15px 15px; padding:15px; background: lightblue
}
a.ntnu-button {
    font: 600 14px "Source Sans Pro", Georgia, serif;
    background: #fff;
    color: #00509e;
    border: 1px solid #00509e;
    border-color: #00509e !important;
    border-style: solid !important;
    border-radius: 10rem;
    display: inline-block;
    padding: 5px 15px;
    height: auto;
    font-weight: bold;
    line-height: 1.5em;
    text-align: center;
    vertical-align: top;
    cursor: pointer;
    text-decoration: none
}

a.ntnu-button:hover {
    background: #00509e;
    color: #fff;
    text-decoration: none
}
div.check ul,
div.check ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.check ul {
  margin: 2em 0;
}

div.check ul li {
  margin: 1em;
  margin-left: 3em;
}

div.check ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size:20;
  float: left;
  margin-left: -1.5em;
  color: #1481b8;
}
div.figure {
  padding: 20px 0 20px 0;
  width: 100%;
}

div.figurefullwitdth {
  padding: 20px 0 20px 0;
  margin-left: -33px;
  margin-right: -33px;
  width: 100%;
}
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size:20;
  float: left;
  margin-left: -1.5em;
  color: #1481b8;
}
.w3collapsible {
  background-color:#f0e9db;
  color: #868279; 
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active, .w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 0 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}
.w3collapsible {
  background-color:#f0e9db;
  color: #868279; 
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active, .w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 0 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}
div.rat ol {
  list-style-type: upper-alpha;
}
div.report p {
padding: 10px;
background-color: #D6E5F0;
border-radius: 5px;
border-left: 6px solid #1481b8 
}

div.report p::before {
    content: 'For the Report: ';
    font-weight: bold; 
    color: #1481b8;
display: inline;
}
.steps ol, .steps ul {
  counter-reset: li;
  list-style: none;
  margin-left: 10px
}

.steps li {
  margin: 0 0 10px 0;
  min-height: 40px
}

.steps li:before {
  content: counter(li);
  counter-increment: li;
  border: 2px solid #868279;
  color: #868279;
  background-color: none;
  font-family: "Source Sans Pro", Georgia, serif;
  font-weight: bold;
  border-radius: 100%;
  text-align: center;
  display: inline-block;
  top:8px;
  left:-30px;
  width: 30px;
  height: 30px;
  position: relative;
  margin: -20px -10px -20px -20px
}

div.task p {
padding: 10px;
background-color: #D6E5F0;
border-radius: 5px;
border-left: 6px solid #1481b8 
}

div.task p::before { 
content: "Task: ";
font-weight: bold;
display: inline;
}
div.tip p {
  padding: 10px;
  background-color: #d9eaf2;
  border-radius: 5px;
  border-left: 6px solid #1481b8
}

div.warning p {
padding: 10px;
background-color: #ffd9ab;
border-radius: 5px;
border-left: 6px solid #fc8c03 
}

div.warning p::before {
    content: '\f071 ';
    font-family: 'Font Awesome 5 Free'; 
    color: #fc8c03;
display: inline;
}
table.weekplan {
  width: 100%;
  table-layout: fixed;
}

table.weekplan td {
  background-color: #1481b8;
  color: white;
}

table.weekplan td, table.weekplan th {
  text-align: center;
}

table.weekplan td:empty {
  background-color: white;
}

table.weekplan td:first-child {
  background-color: white;
  color: grey;
}

table.weekplan a {
  font-weight:bold;
  color: white;
  text-decoration: underline;
}
</style>
<script src="assets/anchor.js"></script>
<script src="assets/script-aside.js"></script>
</head>
<body id="top">

<nav class="navbar navbar-expand-md navbar-dark " style="background-color:#666666"#2B65EC"> <!-- fixed-top -->
        <ul class="nav nav-pills">
        <li class="nav-item">
    <a class="nav-link" href="index.html" style="font-weight: bold")>TTM4175</a>
  </li>

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Teknostart</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="day0-2021.html">Oppstart</a>
      <a class="dropdown-item" href="material/TTM4175-2021-L01-Introduction_to_ethical_hacking.pdf">Introduction to Ethical Hacking (PDF)</a>
      <a class="dropdown-item" href="material/TTM4175-2021-L01-Introduction_to_Kali_linux.pdf">Introduction to Kali Linux (PDF)</a>
      <a class="dropdown-item" href="day2-2021.html">Dag 2</a>
      <a class="dropdown-item" href="day3-2021.html">Dag 3</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="day0-2020.html">(2020) Dag 0: Getting Started</a>
      <a class="dropdown-item" href="day1-2020.html">(2020) Dag 1: Virtual Box</a>
      <a class="dropdown-item" href="day2-2020.html">(2020) Dag 2: Linux Command Line</a>
      <a class="dropdown-item" href="day3-2020.html">(2020) Dag 3: SSH and HTML</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="tips.html">Tips</a>
    </div>
  </li>
        
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Preparation</a>
    <div class="dropdown-menu">
      <a class="dropdown-item disabled"><strong>Security and Ethical Hacking</strong></a>
      <a class="dropdown-item" href="prep-security-1-2021.html">Security 1</a>
      <a class="dropdown-item" href="prep-security-2-2021.html">Security 2</a>
      <a class="dropdown-item" href="prep-security-3-2021.html">Security 3</a>
      <a class="dropdown-item" href="prep-security-4-2021.html">Security 4</a>
      <a class="dropdown-item" href="prep-security-5-2021.html">Security 5</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="prep-teamwork.html">Teamwork</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Internet of Things</strong></a>
      <a class="dropdown-item" href="prep-iot-intro.html">IoT 1: Introduction</a>
      <a class="dropdown-item" href="prep-iot-stm.html">IoT 2: State Machines</a>
      <a class="dropdown-item" href="prep-iot-stmpy.html">IoT 2: State Machines in Micro Python</a>
      <a class="dropdown-item" href="prep-iot-http-json.html">IoT 3: HTTP and JSON</a>
      <a class="dropdown-item" href="prep-iot-mqtt.html">IoT 4: MQTT</a>
      <!--
      <a class="dropdown-item disabled"><strong>Networking (2020)</strong></a>
      <a class="dropdown-item" href="prep-networking-1-2020.html">Binary and IP addresses</a>
      <a class="dropdown-item" href="prep-networking-2-2020.html">Layers and Docker</a>
      <a class="dropdown-item" href="prep-networking-3-2020.html">Webservers and DNS</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Security (2020)</strong></a>
      <a class="dropdown-item" href="prep-security-1-2020.html">Security 1: Cyber Security and Ethical Hacking </a>
      <a class="dropdown-item" href="prep-security-2-2020.html">Security 2: Authentication, Authorization, and Password Storage</a>
      <a class="dropdown-item" href="prep-security-3-2020.html">Security 3: Passwords and Cryptography</a>
      <a class="dropdown-item" href="prep-security-4-2020.html">Security 4: Security Vulnerabilities</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
      <a class="dropdown-item" href="prep-iot-intro.html">IoT 1: Introduction</a>
      <a class="dropdown-item" href="prep-iot-devices.html">IoT 1: Installation</a>
      <a class="dropdown-item" href="prep-iot-stm.html">IoT 2: State Machines</a>
      <a class="dropdown-item" href="prep-iot-stmpy.html">IoT 2: State Machines in Micro Python</a>
      <a class="dropdown-item" href="prep-iot-http-json.html">IoT 3: HTTP and JSON</a>
      <a class="dropdown-item" href="prep-iot-mqtt.html">IoT 4: MQTT</a>
      <a class="dropdown-item" href="prep-iot-api.html">IoT 4: APIs</a>
      <a class="dropdown-item" href="prep-iot-nb-iot.html">NB-IoT (Extra)</a>-->
    </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Labs</a>
    <div class="dropdown-menu">
        <a class="dropdown-item disabled"><strong>Security</strong></a>
        <a class="dropdown-item" href="security-1-2021.html">Security 1</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L02-Technical_information_gathering.pdf">Security 2: Technical Information gathering</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L03-Network_mapping.pdf">Security 3: Network mapping</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L04-Web_hacking1.pdf">Security 4: Web Hacking 1</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L04-Web_hacking2.pdf">Security 4: Web Hacking 2</a>
        <a class="dropdown-item" href="security-5-2021.html">Security 5</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="teamwork.html">Teamwork</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
        <a class="dropdown-item" href="iot-devices-2021.html">IoT 1: Programming Devices</a>
        <a class="dropdown-item" href="iot-stm-2021.html">IoT 2: State Machines</a>
        <a class="dropdown-item" href="iot-http-json.html">IoT 3: HTTP and JSON</a>
        <a class="dropdown-item" href="iot-mqtt-chat.html">IoT 4: MQTT Chat</a>
        <!--
        <a class="dropdown-item disabled"><strong>Networking (2020)</strong></a>
        <a class="dropdown-item" href="networking-1-2020.html">Binary and IP addresses</a>
        <a class="dropdown-item" href="networking-2-2020.html">Layers and Docker</a>
        <a class="dropdown-item" href="networking-3-2020.html">Webservers and DNS</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Security (2020)</strong></a>
        <a class="dropdown-item" href="security-1-2020.html">Security 1</a>
        <a class="dropdown-item" href="security-2-2020.html">Security 2</a>
        <a class="dropdown-item" href="security-3-2020.html">Security 3</a>
        <a class="dropdown-item" href="security-4-2020.html">Security 4</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
        <a class="dropdown-item" href="iot-devices.html">IoT 1: Programming Devices</a>
        <a class="dropdown-item" href="iot-stm.html">IoT 2: State Machines</a>
        <a class="dropdown-item" href="iot-http-json-2020.html">IoT 3: HTTP and JSON</a>
        <a class="dropdown-item" href="iot-http-json-2020-solution.html">IoT 3: HTTP and JSON (Solution and Revised Tasks)</a>
        <a class="dropdown-item" href="iot-mqtt-chat.html">IoT 4: MQTT Chat</a>
        <a class="dropdown-item" href="iot-lopy.html">LoPy</a>
        <a class="dropdown-item" href="iot-mqtt.html">MQTT</a>
        <a class="dropdown-item" href="iot-lorawan.html">LoRaWAN / NB-IoT</a>
        <a class="dropdown-item" href="iot-api.html">API</a>-->
      </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Extra</a>
    <div class="dropdown-menu">
      <a class="dropdown-item disabled"><strong>Learning</strong></a>
      <a class="dropdown-item" href="learning-rats.html">RATs</a>
      <a class="dropdown-item" href="feedback.html">Tilbakemelding</a>
      <a class="dropdown-item" href="reports.html">Rapporter</a>
      <a class="dropdown-item" href="teams.html">Teams</a>
      <a class="dropdown-item" href="working-in-teams.html">Working in Teams</a>
      <a class="dropdown-item" href="tools.html">Learning Tools</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Material</strong></a>
      <a class="dropdown-item" href="commands-help.html">Help on Commands</a>
      <a class="dropdown-item" href="commands.html">List of Commands</a>
      <a class="dropdown-item" href="computer-history.html">Extra Videos</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Tools</strong></a>
      <a class="dropdown-item" href="virtual-box-mac.html">Virtual Box for Mac</a>
      <a class="dropdown-item" href="virtual-box-win.html">Virtual Box for Windows</a>
      <a class="dropdown-item" href="shell-mac.html">Terminal and SSH on Mac</a>
      <a class="dropdown-item" href="shell-win.html">Terminal and SSH on Windows</a>
    </div>
  </li>
  
  <!--
  <li class="nav-item">
    <a class="nav-link" href="#">Blackboard</a>
  </li>-->
</ul>

<div class="navbar-nav flex-row ml-md-auto d-none d-md-flex"></div>
             <a class="navbar-brand" href="https://ntnu.edu">
      	<svg width="100" height="30">
      		<image xlink:href="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.svg" 
      		src="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.png" width="100%" height="100%"></image>
      	</svg>
      </a>
    </nav>


<div class="page">
    </section>
    <section class="content">
<h1>Programming IoT Devices</h1>

<div class="goals"><p>Goals for this week's lab:</p>
<ul>
<li>Program an IoT device</li>
<li>Get familiar with using a simple API (interface)</li>
<li>Create a simple program on a device</li>
</ul>
</div>
<h3>Start with Visual Studio Code</h3>
<ul>
<li>Make sure you have installed <a href="prep-iot-devices.html">Python and Visual Studio Code</a>.</li>
<li>Create a folder for this week's lab, like <code>ttm4175-iot-1</code>, and open this folder in VS Code.</li>
</ul>

<h3>Install the Device Simulator Express</h3>

<span name="c97a72"></span><aside name="c97a72"><p><a href=""><img width="100" src="figures/iot/podcast-python-dse.png"/></a><br/>
Device simulator was created by a couple of interns at Microsoft.
You can listen to them in a Podcast episode at <a href="https://overcast.fm/+F4RBtyfvE">Talk Python To Me</a>.</p>
</aside>
<p>Install the device simulator express extension. This also installs other required Python extensions. You can later check out the <a href="https://code.visualstudio.com/docs/">documentation</a>. There is also a special tutorial for <a href="https://code.visualstudio.com/docs/python/python-tutorial">coding Python</a>.</p>
<ol>
<li>Click on the side bar for extensions.</li>
<li>Search for the <em>device simulator</em>.</li>
<li>Click <em>Install</em>.</li>
</ol>

<div class="figure">
<img src="figures/iot/dse-1.png" alt="Installation of the Device Simulator Extension." width="100%"/>
<span name="figures/iot/dse-1.png">&nbsp;</span>
<aside name="figures/iot/dse-1.png"><p><p>Installation of the Device Simulator Extension.</p>
</p></aside>
</div>
<h3>Device Simulator Commands</h3>
<p>VS Code has a <a href="https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette">Command Palette</a>, which you can open using the following keyboard shortcuts:</p>
<ul>
<li>On Windows: <code>Ctr-Shift-P</code></li>
<li>On Mac: <code>Cmd-Shift-P</code></li>
</ul>
<p>For the device simulator, we will use two commands, one for <strong>creating new files</strong> and for <strong>opening the simulator</strong>.</p>

<div class="figure">
<img src="figures/iot/dse-2.png" alt="Installation of the Device Simulator Extension." width="100%"/>
<span name="figures/iot/dse-2.png">&nbsp;</span>
<aside name="figures/iot/dse-2.png"><p><p>Installation of the Device Simulator Extension.</p>
</p></aside>
</div>
<p>When you run one of these commands, the device simulator asks you which device it should simulate.
You can select between three different devices:</p>
<ul>
<li>The <strong>BBC micro:bit</strong></li>
<li>The <strong>CLUE</strong></li>
<li>The <strong>Circuit Playground Express</strong></li>
</ul>

<div class="figure">
<img src="figures/iot/dse-3.png" alt="The commands ask you which device you want to simulate." width="100%"/>
<span name="figures/iot/dse-3.png">&nbsp;</span>
<aside name="figures/iot/dse-3.png"><p><p>The commands ask you which device you want to simulate.</p>
</p></aside>
</div>
    </section>
    <section class="content">
<h1>Run a Test Program</h1>

<p>Create a file <code>hei.py</code> with the following content:</p>

<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> microbit <span class="im">import</span> display</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    display.show(<span class="st">&quot;HEI!&quot;</span>)</span></code></pre></div>
<p>Open the device simulator with the command from above, and select the <strong>micro:bit</strong> as device. You should see the simulator to the right side of the editor, like this:</p>

<div class="figure">
<img src="figures/iot/dse-4.png" alt="Commands ask you which device you want to simulate." width="100%"/>
<span name="figures/iot/dse-4.png">&nbsp;</span>
<aside name="figures/iot/dse-4.png"><p><p>Commands ask you which device you want to simulate.</p>
</p></aside>
</div>
<p>When you now click the start-button under the device, it should blink like this:</p>

<div class="figure">
<img src="figures/iot/hei-microbit.gif" alt="The blinking display of the microbit." width="100%"/>
<span name="figures/iot/hei-microbit.gif">&nbsp;</span>
<aside name="figures/iot/hei-microbit.gif"><p><p>The blinking display of the microbit.</p>
</p></aside>
</div>
<div class="task"><p>Get the program to run on the simulator.</p>
</div>
<div class="task"><p>Remove the while-loop, so that only <code>show()</code> remains. (Adjust the indentation.) What happens?</p>
</div>
    </section>
    <section class="content">
<h1>Controlling the Device</h1>

<p>The microbit has several electronic components that you can interact with. It's, of course, more fun to interact with the real device, but the simulator is doing a good job at providing access to most of the electronic components. (And the Python code is the same.)</p>
<p>To interact with the electronic components, we use a code <strong>library</strong>, also called a Python <strong>package</strong> This is a set of Python code that provides an interface to the Microbit. Such an interface is also called an <strong>API</strong>, or <em>application programming interface</em>.</p>

<div class="task"><p>Go through the description of the components below, step by step.</p>
<ul>
<li>For each component (like button,...) make yourself familiar with the user interface of the simulator.</li>
<li>Have a look at the API description by following the link and explore some of the examples.</li>
<li>Feel free to try out some of the examples. (We will do three of them later.)</li>
<li>In the end, you should &quot;feel home&quot; with the API.</li>
</ul>
</div>
<h3>Buttons</h3>
<p>The Microbit has two buttons, <code>A</code> and <code>B</code> which can also be pressed at the same time.</p>

<div class="figure">
<img src="figures/iot/dse-buttons.png" width="100%"/>
</div>
<ul>
<li><a href="https://microbit.org/get-started/user-guide/python/#buttons">Examples from microbit.org</a></li>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/button.html">button</a></li>
</ul>

<h3>Display</h3>
<p>The Mircobit has 25 LEDs that make up its main display. It can show text or simple images.</p>

<div class="figure">
<img src="figures/iot/dse-leds.png" width="100%"/>
</div>
<ul>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/display.html#microbit.display.show">display.show(...)</a></li>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/display.html#microbit.display.scroll">display.scoll(...)</a></li>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/display.html#microbit.display.clear">display.clear()</a></li>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/image.html">Display images</a></li>
</ul>

<h3>Temperature</h3>

<div class="figure">
<img src="figures/iot/dse-temperature.png" alt="In the simulator, you imitate the temperature with a slider." width="100%"/>
<span name="figures/iot/dse-temperature.png">&nbsp;</span>
<aside name="figures/iot/dse-temperature.png"><p><p>In the simulator, you imitate the temperature with a slider.</p>
</p></aside>
</div>
<ul>
<li><a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/microbit.html?highlight=temperature#microbit.temperature">temperature()</a></li>
</ul>

<h3>Light Sensor</h3>
<p>The LEDs of the display may also give you an indication of the amount of light shining onto the device.</p>

<div class="figure">
<img src="figures/iot/dse-light-sensor.png" alt="In the simulator, you imitate the light level with a slider." width="100%"/>
<span name="figures/iot/dse-light-sensor.png">&nbsp;</span>
<aside name="figures/iot/dse-light-sensor.png"><p><p>In the simulator, you imitate the light level with a slider.</p>
</p></aside>
</div>
<ul>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/display.html#microbit.display.read_light_level">display.read_light_level()</a></li>
</ul>

<h3>Accelerometer</h3>
<p>An accelerometer measures the acceleration into different directions.
Combined it can also detect movements or gestures.</p>

<div class="figure">
<img src="figures/iot/dse-accelerometer.png" alt="In the simulator, you imitate the acceleration with sliders in each dimension." width="100%"/>
<span name="figures/iot/dse-accelerometer.png">&nbsp;</span>
<aside name="figures/iot/dse-accelerometer.png"><p><p>In the simulator, you imitate the acceleration with sliders in each dimension.</p>
</p></aside>
</div>
<div class="figure">
<img src="figures/iot/dse-gestures.png" alt="Simulate gestures directly." width="100%"/>
<span name="figures/iot/dse-gestures.png">&nbsp;</span>
<aside name="figures/iot/dse-gestures.png"><p><p>Simulate gestures directly.</p>
</p></aside>
</div>
<ul>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/accelerometer.html#microbit.accelerometer.was_gesture">accelerometer.was_gesture('shake')</a> Detect a gesture.</li>
<li>API: <a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/accelerometer.html">other accelerometer functions</a></li>
<li><a href="https://microbit.org/get-started/user-guide/python/#accelerometer-readings">Accelerometer Examples from microbit.org</a></li>
<li><a href="https://microbit.org/get-started/user-guide/python/#gestures">Gesture Examples from microbit.org</a></li>
</ul>

<h3>Other Functions</h3>
<p>In the tasks below, also some other functions will be useful:</p>
<ul>
<li>
<p><a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/random.html#random.randint">random.randint(a, b)</a> Generate a random integer <code>n</code> so that <code>a &lt;= n &lt;= b</code></p>
</li>
<li>
<p><a href="https://microbit-micropython.readthedocs.io/en/v1.0.1/microbit.html?highlight=temperature#microbit.sleep">sleep(n)</a> Sleep for n microseconds.</p>
</li>
</ul>

    </section>
    <section class="content">
<h1>Reflection: Exploring an API</h1>
<p>In the section above, we showed you a couple of functions that you can use to control the Microbit.
Whenever you do programming, exploring an API will be an important part of your work.
There are several strategies to explore an API, which you will also mix as you go along.</p>
<h3>Step 1: Find out which functions you need</h3>
<p>First you need to find out which functions there are at all, and how they are called. For that, you have several options:</p>
<ul>
<li>Look at a tutorial or read a book, which presents you a couple of functions and how to call with some examples, like we did above.</li>
<li>Read the code documentation, which sometimes also provides examples and overview explanations.</li>
<li>Search on the web.</li>
</ul>
<h3>Step 2: Find out how to use the function</h3>
<p>Once you first know which function you need to use, you need to figure out how to use it. This means, which parameters are there and what do they do.
You can figure out these more detailed questions in different ways:</p>
<ul>
<li>Browsing an API documentation, like when you follow the links to the functions above. Such API documentation is often generated by extracting the comments in the source code, and for good libraries they should give you a complete picture.</li>
<li>Tool Support as offered in Visual Studio offers auto-completion. Just place your cursor after the dot of a variable. If the tool can infer which type the variable has, and if it finds the source code for the library where that type is defined, it can show you a popup window that explains the function call. You can also trigger the popup window by pressing <code>Shift-Space</code>.</li>
</ul>

<div class="figure">
<img src="figures/iot/vs-auto-complete.gif" width="100%"/>
</div>
<h3>Experience Helps...</h3>
<p>After some time, you will also become more experienced with APIs, and sometimes you can guess which functions there probably are and how they are most likely called. In that case, you can start typing and look in the auto-completion for something that matches.</p>

<div class="task"><p>After you finished the other tasks below, reflect on how you manage to use the API for using the components of the Microbit. What was easy? What is challenging? What helped?</p>
</div>
    </section>
    <section class="content">
<h1>Application Examples</h1>

<p>Some of the applications of an IoT device follow a very simple programming pattern, in which it waits for a condition to be true, and then does something. This is illustrated in the code skeleton below:</p>

<div class="figure">
<img src="figures/iot/iot-application-pattern.png" width="100%"/>
</div>
<ul>
<li>The outer while loop keeps the device running. As soon as you reach the end, it starts again at the top of the loop.</li>
<li>The if-statement checks for one or more conditions. It can for example read the temperature sensor, ask if a button was pressed or a gesture detected.</li>
<li>Depending on the detected case, the device can react with different actions, like showing something on the display.</li>
<li>The sleep statement lets the device pause for a bit. It specifies a number of microseconds that the device does nothing and waits before it goes into the next iteration and starts again at the top of the while-loop. The sleep is not necessary for all cases, but can be useful when you show something on the display and keep it visible for some time. In a real device that is powered by a battery, sleeping also helps to preserve energy. (This is usually implemented with a different method than sleep as shown here, but the principle for the code is the same.)</li>
</ul>

<p>Let's use this application pattern in some examples. In the following, we show you some of the ideas of the <a href="https://microbit.org/get-started/user-guide/python/">Microbit documentation</a>.
Go through these examples step by step. For each example, do the following:</p>
<ul>
<li>Sketch a solution individually first, then together in your team.</li>
<li>Make it run.</li>
<li>Compare your solution with the one given in the documentation.</li>
</ul>

<div class="report"><p>Show how the applications work with a short sequence of screenshots. Describe what the code does.</p>
</div>
<h2>Nightlight</h2>
<p>Detect that it is getting dark and turn on the display.</p>
<ul>
<li><a href="https://microbit.org/projects/make-it-code-it/nightlight/?editor=python">Tutorial</a></li>
</ul>

<div class="task"><p>Build the example as described above.</p>
</div>
<h2>Cast a Dice</h2>
<p>Detect that the device was shaken, and print a random number between 1 and 6.</p>
<ul>
<li><a href="https://microbit.org/projects/make-it-code-it/dice/?editor=python">Tutorial</a></li>
</ul>

<div class="task"><p>Build the example as described above.</p>
</div>
<h2>Max-Min Thermometer</h2>
<p>Measure the temperature regularly. When you press button A, show the minimum temperature. When you press button B, show the maximum temperature.</p>
<ul>
<li><a href="https://microbit.org/projects/make-it-code-it/max-min-thermometer/?editor=python">Tutorial</a></li>
</ul>

<div class="task"><p>Build the example as described above.</p>
</div>
<div class="task"><p>(Extra) Think about how to add an extra function, so that you can reset the temperatures when both buttons are pressed. Build it.</p>
</div>
    </section>
    <section class="content">
<h1>Create Your Own Application</h1>
<p>Inspired by the examples, brainstorm around some ideas you could try out with the simulated device.</p>
<ul>
<li>Think individually for a few minutes.</li>
<li>Present your idea -- no matter how good you think it is -- to the others. Collect all ideas. (Be positive in this first round.)</li>
<li>Look at the collected suggestions. Which one do you want to build together? Maybe adjust suggestions, or combine ideas.</li>
</ul>

<div class="task"><p>Build your own application.</p>
</div>
<div class="report"><p>Document your application with the help of a series of screen shots and a description. Explain your idea, show the code, and explain how it works.</p>
</div>
<div class="task"><p>Remember to go back to the reflection task above about how to use a new API.</p>
</div>
    </section>
    <section class="content">
<h1>Optional Homework</h1>
<p>Train with these tutorials also on your own. This is a fun way to learn more programming concepts.</p>

    </section>
</div>


<footer></footer>
<script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
</script>
</body>
</html>
