<html lang="en-US"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>TTM4175</title>
<meta property="og:title" content="TTM4175">
<meta property="og:locale" content="en_US">
<meta name="description" content="Introduction to Communication Technology and Digital Security">
<meta property="og:description" content="Introduction to Communication Technology and Digital Security">


<link rel="stylesheet" href="assets/bootstrap.min.css">
<script src="assets/jquery-3.5.1.min.js"></script>
<script src="assets/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="assets/style.css" />
<link rel="stylesheet" type="text/css" href="assets/bootstrap-icons.css">
<style type="text/css">a.ntnu-button {
    font: 600 14px "Source Sans Pro", Georgia, serif;
    background: #fff;
    color: #00509e;
    border: 1px solid #00509e;
    border-color: #00509e !important;
    border-style: solid !important;
    border-radius: 10rem;
    display: inline-block;
    padding: 5px 15px;
    height: auto;
    font-weight: bold;
    line-height: 1.5em;
    text-align: center;
    vertical-align: top;
    cursor: pointer;
    text-decoration: none
}

a.ntnu-button:hover {
    background: #00509e;
    color: #fff;
    text-decoration: none
}
div.check ul,
div.check ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.check ul {
  margin: 2em 0;
}

div.check ul li {
  margin: 1em;
  margin-left: 3em;
}

div.check ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size:20;
  float: left;
  margin-left: -1.5em;
  color: #1481b8;
}
div.figure {
  padding: 20px 0 20px 0;
  width: 100%;
}

div.figurefullwitdth {
  padding: 20px 0 20px 0;
  margin-left: -33px;
  margin-right: -33px;
  width: 100%;
}
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size:20;
  float: left;
  margin-left: -1.5em;
  color: #1481b8;
}
.w3collapsible {
  background-color:#f0e9db;
  color: #868279; 
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active, .w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 0 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}
div.report p {
padding: 10px;
background-color: #D6E5F0;
border-radius: 5px;
border-left: 6px solid #1481b8 
}

div.report p::before {
    content: 'For the Report: ';
    font-weight: bold; 
    color: #1481b8;
display: inline;
}
.steps ol, .steps ul {
  counter-reset: li;
  list-style: none;
  margin-left: 10px
}

.steps li {
  margin: 0 0 10px 0;
  min-height: 40px
}

.steps li:before {
  content: counter(li);
  counter-increment: li;
  border: 2px solid #868279;
  color: #868279;
  background-color: none;
  font-family: "Source Sans Pro", Georgia, serif;
  font-weight: bold;
  border-radius: 100%;
  text-align: center;
  display: inline-block;
  top:8px;
  left:-30px;
  width: 30px;
  height: 30px;
  position: relative;
  margin: -20px -10px -20px -20px
}

div.task p {
padding: 10px;
background-color: #D6E5F0;
border-radius: 5px;
border-left: 6px solid #1481b8 
}

div.task p::before { 
content: "Task: ";
font-weight: bold;
display: inline;
}
div.tip p {
  padding: 10px;
  background-color: #d9eaf2;
  border-radius: 5px;
  border-left: 6px solid #1481b8
}

div.warning p {
padding: 10px;
background-color: #ffd9ab;
border-radius: 5px;
border-left: 6px solid #fc8c03 
}

div.warning p::before {
    content: '\f071 ';
    font-family: 'Font Awesome 5 Free'; 
    color: #fc8c03;
display: inline;
}
table.weekplan {
  width: 100%;
  table-layout: fixed;
}

table.weekplan td {
  background-color: #1481b8;
  color: white;
}

table.weekplan td, table.weekplan th {
  text-align: center;
}

table.weekplan td:empty {
  background-color: white;
}

table.weekplan td:first-child {
  background-color: white;
  color: grey;
}

table.weekplan a {
  font-weight:bold;
  color: white;
  text-decoration: underline;
}
</style>
<script src="assets/anchor.js"></script>
<script src="assets/script-aside.js"></script>
</head>
<body id="top">

<nav class="navbar navbar-expand-md navbar-dark " style="background-color:#666666"#2B65EC"> <!-- fixed-top -->
        <ul class="nav nav-pills">
        <li class="nav-item">
    <a class="nav-link" href="index.html" style="font-weight: bold")>TTM4175</a>
  </li>

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Teknostart</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="day0-2021.html">Oppstart</a>
      <a class="dropdown-item" href="material/TTM4175-2021-L01-Introduction_to_ethical_hacking.pdf">Introduction to Ethical Hacking (PDF)</a>
      <a class="dropdown-item" href="material/TTM4175-2021-L01-Introduction_to_Kali_linux.pdf">Introduction to Kali Linux (PDF)</a>
      <a class="dropdown-item" href="day2-2021.html">Dag 2</a>
      <a class="dropdown-item" href="day3-2021.html">Dag 3</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="day0-2020.html">(2020) Dag 0: Getting Started</a>
      <a class="dropdown-item" href="day1-2020.html">(2020) Dag 1: Virtual Box</a>
      <a class="dropdown-item" href="day2-2020.html">(2020) Dag 2: Linux Command Line</a>
      <a class="dropdown-item" href="day3-2020.html">(2020) Dag 3: SSH and HTML</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="tips.html">Tips</a>
    </div>
  </li>
        
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Preparation</a>
    <div class="dropdown-menu">
      <a class="dropdown-item disabled"><strong>Security and Ethical Hacking</strong></a>
      <a class="dropdown-item" href="prep-security-1-2021.html">Security 1</a>
      <a class="dropdown-item" href="prep-security-2-2021.html">Security 2</a>
      <a class="dropdown-item" href="prep-security-3-2021.html">Security 3</a>
      <a class="dropdown-item" href="prep-security-4-2021.html">Security 4</a>
      <a class="dropdown-item" href="prep-security-5-2021.html">Security 5</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="prep-teamwork.html">Teamwork</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Internet of Things</strong></a>
      <a class="dropdown-item" href="prep-iot-intro.html">IoT 1: Introduction</a>
      <a class="dropdown-item" href="prep-iot-stm.html">IoT 2: State Machines</a>
      <a class="dropdown-item" href="prep-iot-stmpy.html">IoT 2: State Machines in Micro Python</a>
      <a class="dropdown-item" href="prep-iot-http-json.html">IoT 3: HTTP and JSON</a>
      <a class="dropdown-item" href="prep-iot-mqtt.html">IoT 4: MQTT</a>
      <!--
      <a class="dropdown-item disabled"><strong>Networking (2020)</strong></a>
      <a class="dropdown-item" href="prep-networking-1-2020.html">Binary and IP addresses</a>
      <a class="dropdown-item" href="prep-networking-2-2020.html">Layers and Docker</a>
      <a class="dropdown-item" href="prep-networking-3-2020.html">Webservers and DNS</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Security (2020)</strong></a>
      <a class="dropdown-item" href="prep-security-1-2020.html">Security 1: Cyber Security and Ethical Hacking </a>
      <a class="dropdown-item" href="prep-security-2-2020.html">Security 2: Authentication, Authorization, and Password Storage</a>
      <a class="dropdown-item" href="prep-security-3-2020.html">Security 3: Passwords and Cryptography</a>
      <a class="dropdown-item" href="prep-security-4-2020.html">Security 4: Security Vulnerabilities</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
      <a class="dropdown-item" href="prep-iot-intro.html">IoT 1: Introduction</a>
      <a class="dropdown-item" href="prep-iot-devices.html">IoT 1: Installation</a>
      <a class="dropdown-item" href="prep-iot-stm.html">IoT 2: State Machines</a>
      <a class="dropdown-item" href="prep-iot-stmpy.html">IoT 2: State Machines in Micro Python</a>
      <a class="dropdown-item" href="prep-iot-http-json.html">IoT 3: HTTP and JSON</a>
      <a class="dropdown-item" href="prep-iot-mqtt.html">IoT 4: MQTT</a>
      <a class="dropdown-item" href="prep-iot-api.html">IoT 4: APIs</a>
      <a class="dropdown-item" href="prep-iot-nb-iot.html">NB-IoT (Extra)</a>-->
    </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Labs</a>
    <div class="dropdown-menu">
        <a class="dropdown-item disabled"><strong>Security</strong></a>
        <a class="dropdown-item" href="security-1-2021.html">Security 1</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L02-Technical_information_gathering.pdf">Security 2: Technical Information gathering</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L03-Network_mapping.pdf">Security 3: Network mapping</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L04-Web_hacking1.pdf">Security 4: Web Hacking 1</a>
        <a class="dropdown-item" href="material/TTM4175-2021-L04-Web_hacking2.pdf">Security 4: Web Hacking 2</a>
        <a class="dropdown-item" href="security-5-2021.html">Security 5</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="teamwork.html">Teamwork</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
        <a class="dropdown-item" href="iot-devices-2021.html">IoT 1: Programming Devices</a>
        <a class="dropdown-item" href="iot-stm-2021.html">IoT 2: State Machines</a>
        <a class="dropdown-item" href="iot-http-json.html">IoT 3: HTTP and JSON</a>
        <a class="dropdown-item" href="iot-mqtt-chat.html">IoT 4: MQTT Chat</a>
        <!--
        <a class="dropdown-item disabled"><strong>Networking (2020)</strong></a>
        <a class="dropdown-item" href="networking-1-2020.html">Binary and IP addresses</a>
        <a class="dropdown-item" href="networking-2-2020.html">Layers and Docker</a>
        <a class="dropdown-item" href="networking-3-2020.html">Webservers and DNS</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Security (2020)</strong></a>
        <a class="dropdown-item" href="security-1-2020.html">Security 1</a>
        <a class="dropdown-item" href="security-2-2020.html">Security 2</a>
        <a class="dropdown-item" href="security-3-2020.html">Security 3</a>
        <a class="dropdown-item" href="security-4-2020.html">Security 4</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item disabled"><strong>Internet of Things (2020)</strong></a>
        <a class="dropdown-item" href="iot-devices.html">IoT 1: Programming Devices</a>
        <a class="dropdown-item" href="iot-stm.html">IoT 2: State Machines</a>
        <a class="dropdown-item" href="iot-http-json-2020.html">IoT 3: HTTP and JSON</a>
        <a class="dropdown-item" href="iot-http-json-2020-solution.html">IoT 3: HTTP and JSON (Solution and Revised Tasks)</a>
        <a class="dropdown-item" href="iot-mqtt-chat.html">IoT 4: MQTT Chat</a>
        <a class="dropdown-item" href="iot-lopy.html">LoPy</a>
        <a class="dropdown-item" href="iot-mqtt.html">MQTT</a>
        <a class="dropdown-item" href="iot-lorawan.html">LoRaWAN / NB-IoT</a>
        <a class="dropdown-item" href="iot-api.html">API</a>-->
      </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Extra</a>
    <div class="dropdown-menu">
      <a class="dropdown-item disabled"><strong>Learning</strong></a>
      <a class="dropdown-item" href="learning-rats.html">RATs</a>
      <a class="dropdown-item" href="feedback.html">Tilbakemelding</a>
      <a class="dropdown-item" href="reports.html">Rapporter</a>
      <a class="dropdown-item" href="teams.html">Teams</a>
      <a class="dropdown-item" href="working-in-teams.html">Working in Teams</a>
      <a class="dropdown-item" href="tools.html">Learning Tools</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Material</strong></a>
      <a class="dropdown-item" href="commands-help.html">Help on Commands</a>
      <a class="dropdown-item" href="commands.html">List of Commands</a>
      <a class="dropdown-item" href="computer-history.html">Extra Videos</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item disabled"><strong>Tools</strong></a>
      <a class="dropdown-item" href="virtual-box-mac.html">Virtual Box for Mac</a>
      <a class="dropdown-item" href="virtual-box-win.html">Virtual Box for Windows</a>
      <a class="dropdown-item" href="shell-mac.html">Terminal and SSH on Mac</a>
      <a class="dropdown-item" href="shell-win.html">Terminal and SSH on Windows</a>
    </div>
  </li>
  
  <!--
  <li class="nav-item">
    <a class="nav-link" href="#">Blackboard</a>
  </li>-->
</ul>

<div class="navbar-nav flex-row ml-md-auto d-none d-md-flex"></div>
             <a class="navbar-brand" href="https://ntnu.edu">
      	<svg width="100" height="30">
      		<image xlink:href="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.svg" 
      		src="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.png" width="100%" height="100%"></image>
      	</svg>
      </a>
    </nav>


<div class="page">
    </section>
    <section class="content">
<h1>Password clearing and cracking</h1>
<p>In this lab, you will learn how to clear a password in Windows and how to use ophcrack and John the ripper to crack passwords.</p>

    </section>
    <section class="content">
<h1>Create user accounts in Windows 7</h1>
<ul>
<li>
<p>Start the Windows 7 VM and log in with the user <strong>Lab4</strong> (no password is required).</p>
</li>
<li>
<p>Go to &quot;Control Panel&quot; and create four standard user accounts <strong>user1</strong>, <strong>user2</strong>, <strong>user3</strong>, and <strong>user4</strong>. Assign a different password to each of the users. For the first two users, choose one of the commonly-used password. Here you can find a <a href="https://en.wikipedia.org/wiki/List_of_the_most_common_passwords">list of the most common passwords</a>. For the remaining users, choose stronger passwords that are of different lengths, with and without special characters.</p>
</li>
<li>
<p>Shut down the Windows VM</p>
</li>
</ul>

    </section>
    <section class="content">
<h1>Clearing the user password in Windows</h1>
<p>In the previous lab, you had to swap the system files in order to change the user's password. Another alternative that you will try now is to clear the password.</p>
<h2>Updating chntpw</h2>
<p>Passwords in Windows are stored hashed in the Security Accounts Manager (SAM) database, located in the <em>/Windows/System32/config</em> folder. We will manipulate the SAM registry in order to clear the hashed password of user <strong>Lab2</strong>.
SAM file is stored in a binary format and cannot simply be read by a text editor. We will use a program called <em>chntpw</em> in order to clear the user's password from the SAM file.</p>
<ul>
<li>Make sure that Windows 7 is mounted within Kali. Log in to Kali with <strong>root</strong> account, and go to the following folder containing the SAM file:</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mount</span> /dev/sdb2 /mnt/windows</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /mnt/windows/Windows/System32/config</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code></pre></div>
<ul>
<li>Start <em>chntpw</em> in interactive mode by using <em>-i</em> flag option and read in the SAM file</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#chntpw -i sam (The SAM file is stored either in uppercase or in lowercase so choose the name that is used on your system).</span></span></code></pre></div>
<ul>
<li>
<p>Follow the on-screen instructions. Select option 1 to begin clearing a user password (the number in square brackets denotes the default).</p>
</li>
<li>
<p>We want to clear the password of user <strong>Lab2</strong>, so enter its RID</p>
</li>
<li>
<p>Choose option 1 again to clear the password of user <strong>Lab2</strong></p>
</li>
<li>
<p>Quit the current context (q), then quit the main menu (q), and confirm that you want to save the changes (y). You have now cleared the password of <strong>Lab2</strong> user.</p>
</li>
</ul>
<p>Finally, return to your home folder <code># cd </code> and unmount the Windows partition from kali Linux <code># umount /mnt/windows</code>.</p>
<p>Reboot the machine and select Windows 7. You should now be able to login into <strong>Lab2</strong> account without a password.</p>

    </section>
    <section class="content">
<h1>Cracking the Windows 7 user password</h1>
<h2>Obtaining the password hashes</h2>
<p>Your task now is to <strong>obtain</strong> the password hashes stored in the SAM database. We need to use Kali with the Windows 7 partition mounted. Make sure that you have the Windows 7 disk attached to your Kali Linux virtual machine.</p>
<ul>
<li>Mount Windows 7 into Kali and locate the SAM database by changing to the <em>Windows/System32/config</em> directory</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mount</span> /dev/sdb2 /mnt/windows</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /mnt/windows/Windows/System32/config</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code></pre></div>
<p>In order to enhance the security of the SAM database against off-line attacks, Microsoft introduced the Syskey function, which partially encrypts the SAM database based on a key stored in another registry file called SYSTEM. Hence you need to extract the contents of both the SYSTEM file and the SAM file. Both are stored in a binary format and are not readily readable.</p>
<ul>
<li>Use the tool <em>samdump2</em> to extract the content of the SYSTEM file and the SAM file, and write the contents to <em>win_pwd_hashes.text</em></li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">samdump2</span> system sam <span class="op">&gt;</span> ~/win_pwd_hashes.txt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> </span></code></pre></div>
<h2>Examining the SAM database</h2>
<ul>
<li>Take a look at the content of the <em>win_pwd_hashes.text</em>  <code># cat win_pwd_hashes.txt</code>. Each line entry represents a user account on the system with their respective hashes.</li>
</ul>

<h2>Examining the SAM database in Ophcrack</h2>
<p>Ophcrack is a program that comes with a graphical user interface that allows you to see the format of the passwords in the SAM database.</p>
<ul>
<li>
<p>Open Ophcrack by running <code>ophcrack</code> in the terminal of your Kali Linux machine</p>
</li>
<li>
<p>Click on Load -&gt;PWDUMP file</p>
</li>
<li>
<p>Find the file <em>win_pwd_hashes.txt</em>. It will show you the hashed passwords.</p>
</li>
<li>
<p>try the Crack functionality on the available users. Did it succeed in cracking any of the passwords?</p>
</li>
</ul>

<h2>John the Ripper</h2>
<p>John the Ripper is a cracking tool that runs in both <em>brute-force</em> and <em>dictionary attack</em> modes. It's basic functionality is to repeatedly try different passwords and hash them until it finds a match. However, since the space of all possible passwords is virtually infinite, testing all password in this manner (brute-force search) will not be feasible unless the password was very short.
Instead, we will try a list of more likely passwords known as <em>dictionary attack</em> mode.</p>
<p>John the Ripper comes with a pre-installed dictionary of some typical passwords located in <em>/usr/share/john/password.lst</em>. Open the pre-installed dictionary of John the Ripper and check its content.</p>
<h3>Default dictionary</h3>
<ul>
<li>Start by running John the Ripper on our obtained Windows 7 hash file with the default dictionary, using the following command (note the use of single quotes around the username):</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># john --wordlist --format=NT --user=&#39;user1&#39; win_pwd_hashes.txt</span></span></code></pre></div>
<p>This command tells John to use a dictionary attack (–-wordlist) with words from the default dictionary <em>/etc/share/john/password.lst</em>; using the hash function NTLMv2 (–-format=NT); targeting user <strong>user1</strong> (–-user=...); and where the target hashes are stored in win_pwd_hashes.txt.</p>
<p>If the output of John the Ripper shows 0 guesses, it means the password is not contained in the default dictionary and it could not be cracked.</p>
<ul>
<li>Repeat the same command for the 3 other users that you created. Did John the Ripper succeed in guessing all passwords?</li>
</ul>

<div class="tip"><p>Note that in the case where the password is not simple or didn't exist in John's dictionary, then you would need a much bigger dictionary and a lot longer time to crack it. You can use your own password lists or download a large one from Internet (there’s lots of dictionary file in terabyte size).</p>
<h3>Creating new passwords from existing ones</h3>
<p>Instead of using a larger dictionary, John the Ripper can apply a multitude of transformations to a wordlist in order to create new passwords from existing ones. For example, we could make it append numbers to the end of all the words in the dictionary, such that if the word &quot;car&quot; was in the original dictionary, then it would also try <em>car0</em> , <em>car1</em>, ..., <em>car 9</em>, <em>car00</em>, <em>car01</em>, ..., etc.</p>
<p>These transformations are defined by a set of rules found in the configuration file <em>/etc/john/john.conf</em>.</p>
<ul>
<li>
<p>Open the config file by running <code>leafpad /etc/john/john.conf &amp; </code> from the terminal. (If you don't have leafpad installed in Kali, run the following command to install it <code>apt-get install leafpad</code>).</p>
</li>
<li>
<p>Scroll down to the line containing &quot;[List.Rules:Wordlist]&quot;.</p>
</li>
</ul>
<p>Every line underneath contains a transformation rule which will be applied to every word of the dictionary. The rules starting with a hyphen, e.g. -c, -8, -s, etc are used to decide whether the rest of the transformation rules on the line should be applied to a word or not. You can just ignore these.</p>
<p>The actual transformation look like this one: <code> &lt;5 c r Q</code></p>
<p>This rule applies to words of length less than 5 <em>( &lt;5 )</em> ; and if so, it will capitalize <em>( c )</em> and reverse <em>( r )</em> it. The <em>Q</em> command ensures that words that are not changed won't be unnecessarily added to the dictionary, avoiding duplicates (e.g. capitalizing an already capitalized word does not change it).</p>
<p>For example, if &quot;car&quot; was in the dictionary, then the above rule would make John the Ripper also try the word <em>raC</em>; that is by checking first if the word's length is less than 5, then capitalizing it to get <em>Car</em>, and finally reversing it to get the result <em>raC</em>.</p>
<ul>
<li>Your task now is to create a rule that applies to all words that are longer than 1 and less than 7, and replaces all appearances of lowercase &quot;L&quot; with the number &quot;1&quot;. For example, if the word &quot;hello&quot; was in the dictionary, then &quot;he11o&quot; would also be added. Use the command &quot;s&quot; to substitute a letter by another (example <em>so0</em> substitutes letter &quot;o&quot; with the number 0).</li>
</ul>
<p><button class="w3collapsible">Hint</button></p>
<div class="w3content">
<p>The rule that you want to define will be: &gt;1 &lt;7 sl1 Q</p>
</div></div>
<p>Take a look at the <a href="http://www.openwall.com/john/doc/RULES.shtml">John the Ripper web page</a> in which the description of every possible transformation rule is provided.</p>

<ul>
<li>
<p>To check how the default rules work, create a dictionary file <em>test1.dict</em> containing the single word &quot;labrador&quot; <code># echo &quot;labrador&quot; &gt; test1.dict</code></p>
</li>
<li>
<p>Apply the default John rules to <em>tes1t.dict</em> and print the results as follows: <code># john --wordlist=test1.dict --rules --stdout</code></p>
</li>
<li>
<p>How many new passwords did John create from this single-word dictionary? find out by piping the output above with '|' into <em>wc</em>.</p>
</li>
</ul>

<div class="tip"><p>The <em>wc</em> command will display the following three numbers: number of lines, number of words and number of bytes of the file.</p>
</div>
<ul>
<li>Similarly, create a dictionary <em>test2.dict</em> containing the word &quot;hello&quot; and apply the default John rules to it. Does the file contains the word &quot;he11o&quot; as a result of the rule that you added earlier? Why hasn't this rule been applied to the word &quot;labrador&quot;?</li>
</ul>
<h3>Cracking password in Linux</h3>
<ul>
<li>
<p>In Kali Linux, create a user named <strong>kuser</strong> and assign a simple password to it (choose a password from the common passwords list)</p>
</li>
<li>
<p>Use the <em>unshadow</em> command to combine the entries of <em>/etc/passwd</em> and <em>/etc/shadow</em> to create 1 file with username and password details. Redirect the output to <em>/root/kuser_passwd</em></p>
</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a> <span class="ex">unshadow</span> /etc/passwd /etc/shadow <span class="op">&gt;</span> /root/kuser_passwd</span></code></pre></div>
<ul>
<li>Run John the Ripper on the obtained file</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">john</span> <span class="at">--wordlist</span><span class="op">=</span>/usr/share/john/password.lst /root/kuser_passwd </span></code></pre></div>
<ul>
<li>If the password was cracked, we can now use john –show  option to list cracked passwords</li>
</ul>

<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">john</span> <span class="at">--show</span> /root/kuser_passwd </span></code></pre></div>
    </section>
</div>


<footer></footer>
<script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
</script>
</body>
</html>
