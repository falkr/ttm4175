<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="generator" content="">
  <title>TTM4175</title>
  <link rel="canonical" href="https://edu.iik.ntnu.no">
  <!-- Bootstrap core CSS -->
  <link href="../assets/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../assets/style-frame.css" rel="stylesheet">
  <link href="../assets/style-fonts.css" rel="stylesheet">
  <link href="../assets/style-code.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="../assets/anchor.js"></script>
  <script src="../assets/clipboard.min.js"></script>
  <script src="../assets/script-aside.js"></script>
  <style>/* === boxes === */
div.box {
  padding: 10px;
  border-radius: 5px;
  position: relative;
  padding: 1rem 1rem 1rem 3.5rem;
}

div.box>p {
  margin-bottom: 0px;
}

div.box>*:first-child::before {
  font-family: bootstrap-icons !important;
  font-size: 1.5rem;
  padding: 0.8rem;
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  display: grid;
}

div.milestone {
  background-color: #E3BCDA;
}

div.milestone>*:first-child::before {
  content: '\f706';
  color: #75225E;
}

div.delivery {
  background-color: #ffd9ab;
}

div.delivery>*:first-child::before {
  content: '\f1be';
  color: #fc8c03;
}

div.definition {
  background-color: #EEE5D5;
}

div.definition>*:first-child::before {
  content: '\f3e9';
  color: #7D705A;
}

div.guideline {
  background-color: #fae7e8;
}

div.guideline>*:first-child::before {
  content: '\f548';
  color: #e45460;
}

div.report {
  background-color: #D6E5F0;
}

div.report>*:first-child::before {
  content: '\f43e';
  color: #1481b8;
}

div.warning {
  background-color: #ffd9ab;
}

div.warning>*:first-child::before {
  content: '\f33a';
  color: #fc8c03;
}

div.tip {
  background-color: #E3BCDA;
}

div.tip>*:first-child::before {
  content: '\f402';
  color: #75225E;
}

div.task {
  background-color: #fae7e8;
}

div.task>*:first-child::before {
  content: '\f5db';
  color: #e45460;
}

/* === goals === */
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f3cb';
  font-family: bootstrap-icons !important;
  font-size: 20;
  float: left;
  margin-left: -1.5em;
  color: #00509e;
}

/* === hints === */
.w3collapsible {
  background-color: #f0e9db;
  color: #868279;
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active,
.w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}

</style>
</head>

<body>





  <nav class="navbar navbar-expand-lg navbar shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand" href="https://ntnu.edu" title="NTNU Homepage">
        <img id="header_logo" alt="NTNU Hjemmeside" width="120"
          src="https://www.ntnu.no/o/ntnu-theme/images/logo_ntnu.svg" height="23">
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
          </svg>
        </span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="../index.html">TTM4175</a>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Teknostart
            </a>
            <ul class="dropdown-menu dropdown-menu">
              <li><a class="dropdown-item" href="../teknostart/index.html">Teknostart oversikt</a></li>
              <li>
                <div class="dropdown-divider"></div>
              </li>
              <li><a class="dropdown-item" href="../teknostart/day1.html">Teknostart Dag 1</a></li>
              <li><a class="dropdown-item" href="../teknostart/day2.html">Teknostart Dag 2</a></li>
              <li><a class="dropdown-item" href="../teknostart/day3.html">Teknostart Dag 3</a></li>
              <li><a class="dropdown-item" href="../teknostart/day4.html">Teknostart Dag 4</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Units
            </a>
            <ul class="dropdown-menu dropdown-menu">
              <a class="dropdown-item" href="../units.html">Oversikt</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="../unit-cli/index.html">Lab 1: Linux CLI</a>
              <a class="dropdown-item" href="../unit-net1/index.html">Lab 2: IPs, LAN</a>
              <a class="dropdown-item" href="../unit-net2/index.html">Lab 3: Ports, Web Servers</a>
              <a class="dropdown-item" href="../unit-net3/index.html">Lab 4: Routing, DNS</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="../unit-p1/index.html">IoT and the Microbit</a>
              <a class="dropdown-item" href="../unit-p2/index.html">State Machines</a>
              <a class="dropdown-item" href="../unit-p3/index.html">HTTP and JSON</a>
              <a class="dropdown-item" href="../unit-p4/index.html">MQTT</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="../unit-cs1/index.html">Cybersecurity 1: Intro and Ethical Hacking</a>
              <a class="dropdown-item" href="../unit-cs2/index.html">Cybersecurity 2: Information Gathering</a>
              <a class="dropdown-item" href="../unit-cs3/index.html">Cybersecurity 3: Exploitation</a>
            </ul>
          </li>



          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Learning
            </a>
            <ul class="dropdown-menu dropdown-menu">
              <li><a class="dropdown-item" href="../learning/learning.html">LÃ¦ring</a></li>
              <li><a class="dropdown-item" href="../learning/reports.html">Rapporter</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Tools
            </a>
            <ul class="dropdown-menu dropdown-menu">
              <li><a class="dropdown-item" href="../tools/index.html">Tools</a></li>
              <!--<li><a class="dropdown-item" href="../tools/tools-python.html">Python</a></li>-->
              <li><a class="dropdown-item" href="../tools/tools-gui.html">GUIs in Python</a></li>
              <li><a class="dropdown-item" href="../tools/tools-mqtt.html">MQTT</a></li>
              <li><a class="dropdown-item" href="../tools/tools-notebooks.html">Notebooks</a></li>
              <li><a class="dropdown-item" href="../tools/tools-stmpy.html">STMPY</a></li>
            </ul>
          </li>
        </ul>
        <div class="bg-light border ms-auto"></div>
        <div>
          <a class="nav-link" href="../schedule.html"><svg xmlns="http://www.w3.org/2000/svg" width="16"
              height="16" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
              <path
                d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z" />
              <path
                d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
            </svg></a>
        </div>
      </div>
    </div>
  </nav>

  <main class="container container-max-width">
    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../index.html">TTM4175</a></li>
<li class="breadcrumb-item"><a href="index.html">Networking 2</a></li>
<li class="breadcrumb-item active" aria-current="page">Teamwork</li>
</ol>
</nav>
<section class="mt-2 mb-5 py-3">
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h1>Networking II - Ports, Layers, Client-Server Architecture, Web Servers</h1>
<p>The overall goal of this lab is to complement your knowledge on IP and subnets by bringing applications into the picture and allowing you to see the notions of ports and layers in a concrete example.
This will be achieved using the same GNS3-based environment as last week.</p>
<p>Additionally, we will learn more about Docker. Docker is the tool that is used to provision the invididual hosts in out GNS3 environment, but has many use cases beyond that.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Learning Goals</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="goals"><p>After this lab, you will be able to</p>
<ul>
<li>Recognise the importance of <em>ports</em> in networking</li>
<li>Learn basic Docker principles
<ul>
<li>Images and containers</li>
<li>The <em>Dockerfile</em></li>
<li>Basic commands for managing containers</li>
</ul>
</li>
</ul>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
</section>
<section class="mt-2 mb-5 py-3">
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h1>Lab Exercises</h1>
<p>Please <strong>read each exercise</strong> entirely before starting to solve it.</p>
<p>Remember that you should deliver a report after the networking module is finished.
It should include the main commands and configurations necessary to complete each exercise.
Do not forget to take notes while solving the exercises so you do not have to repeat them.</p>
<p>These exercises should be completed in teams.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
</section>
<section class="mt-2 mb-5 py-3">
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h1>Web Server, Ports, HTTP</h1>
<h2>Initializing the Environment</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>We will use the same topology as last week, using one host as client and one as server. To get started, <strong>close any running instances of GNS3 and launch it again</strong>. You can load your project from last time or re-create the two-host topology according to <a href="/unit-net1/teamwork.html#launching-gns3-and-creating-a-basic-network">last week's instructions</a>.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>Since the underlying Docker images that are used for the hosts have been updated, it is necessary to restart GNS3 for the changes to take effect.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>As last week, set compatible IP addresses on the interfaces of the two hosts, for instance <code>10.0.0.1/24</code> and <code>10.0.0.2/24</code>.
Before you continue, make sure that the two hosts can reach each other by using <code>ping</code>.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Running a Web Server</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol>
<li>As mentioned before, one host will take the role of the client and one that of the server. On the server (<code>ubuntu-host-2</code> with IP <code>10.0.0.2</code>), navigate to the <code>/var/www</code> folder and inspect its contents.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="2">
<li>You can run a simple Python-based HTTP server in your current working directory by issuing the command <code>python3 -m http.server 80</code>. This will instruct python to run the <code>http.server</code> module with <code>80</code> as its first argument, indicating which port the HTTP server should listen to. 80 is the standard port number for HTTP. You can learn more about commonly used port numbers <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">here</a>.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>You can use the combination <code>Ctrl-C</code> to stop the server application and regain control of the console.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Interacting with the Web Server</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="3">
<li>With the server application running, we can access the content it serves. Instead of using a browser, we can use command line tools like <code>curl</code> to connect to the server and download HTML pages or other files that are offered.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="4">
<li>From the host (<code>ubuntu-host-1</code> if you're following the same naming and addressing scheme), try <code>curl 10.0.0.2</code>. Observe the output and relate it to the content you saw in step 1. Investigate how you can download the file <code>example.html</code>.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="5">
<li>On <code>ubuntu-host-2</code>, stop the server application, rename <code>example.html</code> to <code>index.html</code>, and restart the server application. Re-run the <code>curl</code> commands from the client from the previous step and discuss the differences in the output. What happens if you try requesting a page that does not exist?</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Capturing HTTP Traffic</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="6">
<li>Following the <a href="/unit-net1/teamwork.html#verifying-your-configuration">instructions from last week</a>, start a traffic capture on the link between the client and the server.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="7">
<li>
<p>With Wireshark open, run the previous <code>curl</code> commands again and discuss the HTTP traffic that appears.</p>
<ul>
<li>What kind of information is exchanged between client and server in the HTTP messages in each direction?</li>
<li>Click on an HTTP packet and check the detailed view in the lower half of the Wireshark window. Taking a look at these details, what can you tell about the protocol stack that is used here? Refer back to chapter 1.5.1 in the book and map the protocols you find to the different layers.</li>
<li>Compare how the traffic changes when you request <code>example.html</code> and <code>lipsum.txt</code>. What could be the reason?</li>
</ul>
</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><button class="w3collapsible">Hint</button>
<div class="w3content">
<p>Compare the size of the two files and recall what we discussed about packets.</p>

</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Changing Ports</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="8">
<li>Going back to the server, stop the application and re-run it using a different port. For instance, <code>python3 -m http.server 8000</code>. How does this change the output at the client trying to <code>curl</code>? Find out how to point <code>curl</code> to a specific port, e.g., by consulting its <a href="https://curl.se/docs/manual.html">manual</a>.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
</section>
<section class="mt-2 mb-5 py-3">
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h1>Docker</h1>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>For this second part, you can quit GNS3 and open a terminal directly on your VM. The CLI prompt should say <code>netlab@netlab-linux:~$ </code>.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Basics</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>In Docker, we distinguish between <em>images</em> and <em>containers</em> (also called <em>instances</em>). Images are the pre-built templates or snapshots that package all the software that is required for the intended use case. The use case can be a fresh install of a specific Linux distribution, a pre-installed and pre-configured service (web server, mail server, database, ..), or more. For this, an image can include code and configuration files, runtimes and libraries, as well as other dependencies. Based on such an image, we can launch one or multiple running containers that execute the environment defined in the image.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol>
<li>
<p>To check which images are available on your machine, you can run <code>docker images</code>. How many images are listed in your case?</p>
</li>
<li>
<p>You can create an instance based on the <code>ubuntu</code> image by running</p>
</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="id28e300">docker run -dit --name my-ubuntu-container ubuntu
</pre>
<button type="button" class="copy-button" data-clipboard-target="#id28e300">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-dit</span> <span class="at">--name</span> my-ubuntu-container ubuntu</span></code></pre></div>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>The output should give you a long ID which is used to uniquely identify that specific instance. For easier reference, we also provided a more memorable name, <code>my-ubuntu-container</code>.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>You can learn more about the options of docker run in the <a href="https://docs.docker.com/engine/reference/run/">documentation</a>. For now, it is enough to know that <code>docker run -dit</code> instantiates a container in the background, and allows us to attach to its console later on.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="3">
<li>You can confirm that the instance has been created using <code>docker ps</code> (process status). The output contains the ID, base image name, and other high-level information about your running container instances. Following step 2, you can also launch additional instances from the same image and confirm their presence using <code>docker ps</code>.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>If you create multiple containers and explicitly provide a name, make sure that the name is unique to avoid errors.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="4">
<li>With the containers running, you can attach to them via</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="idd595fb">docker exec -it <containerID> bash
</pre>
<button type="button" class="copy-button" data-clipboard-target="#idd595fb">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>containerID<span class="op">&gt;</span> bash</span></code></pre></div>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>Your prompt should change from <code>netlab@netlab-linux:~$ </code> to <code>root@fa00f8e10813:/# </code>, indicating that you are now logged in as root on the container with the respective ID. Create some files or folders inside the container.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>In this case, the <code>containerID</code> can be either the ID from the outputs in the previous step (the first few characters are enough as long as they are enough to uniquely identify your container), or the name you chose when running the container.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="5">
<li>Try running <code>cat /etc/os-release</code> inside your container, then <code>exit</code> back to your netlab VM and run the same command to compare the operating system versions. What can you observe?</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><button class="w3collapsible">Hint</button>
<div class="w3content">
<p>This step illustrates some of the power of using containers.
The Docker image we used as the basis for our container uses a different version of the same operating system and, as we shall see later, it is even possible to run different Linux distributions in our containers, regardless of the main host's distribution.</p>

</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="6">
<li>
<p>To clean up, you can stop and remove containers using <code>docker stop &lt;containerID&gt;</code> followed by <code>docker rm &lt;containerID&gt;</code>.</p>
</li>
<li>
<p>Re-create one of the containers according to step 2. What happened to the files/folders you created in step 4? Discuss how this relates to the concepts of images and containers.</p>
</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><h2>Building Our Own Image</h2>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><p>We can also define our own image to create containers which run our desired software. As an example, we will create the web server from the fist part of today's lab. To this end, we will use the <code>ubuntu</code> image as a starting point and extend it to fit our needs. The Docker way of doing this involves a <em>Dockerfile</em> which you can think of as a recipe for building images.</p>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol>
<li>Download an exemplary Dockerfile project with the command below. <code>wget</code> is similar to the <code>curl</code> command you used earlier, but in its default behavior downloads the file rather than displaying its content.</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="id52f776">wget https://folk.ntnu.no/stanisll/2023/ttm4175/ttm4175-webserver.zip
</pre>
<button type="button" class="copy-button" data-clipboard-target="#id52f776">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://folk.ntnu.no/stanisll/2023/ttm4175/ttm4175-webserver.zip</span></code></pre></div>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="2">
<li>
<p>Extract the zip archive using <code>unzip ttm4175-webserver.zip</code> and navigate into the newly created <code>ttm4175-webserver</code> folder.</p>
</li>
<li>
<p>Read through the commented <code>Dockerfile</code> and try to understand what it does. You do not need to execute the commands in that file.</p>
</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><div class="tip box mt-3 mb-3"><p>You can refer to the <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile manual</a> if you want to learn more about the different Dockerfile-specific instructions like <code>FROM</code>, <code>RUN</code>, and <code>EXPOSE</code>. For more information about the apt software package manager, you can use <code>man apt</code>.</p>
</div></div><aside class="col-md-4 chunk ps-2"></aside></div>
<div class="row g-0 my-3"><div class="col-md-8 px-4 chunk"><ol start="4">
<li>
<p>Extend the Dockerfile to not only copy the <code>example.html</code> file, but also <code>lipsum.txt</code>. You can use the <code>nano</code> editor for this.</p>
</li>
<li>
<p>To build an image based on the Dockerfile, execute <code>docker build -t ttm4175-webserver .</code> (don't forget the dot). This will instruct docker to scan the current directory (<code>.</code>) for a Dockerfile and build an image called <code>ttm4175-webserver</code>.</p>
</li>
<li>
<p>Confirm that the build was successful by checking <code>docker images</code>. Then launch an instance of the <code>ttm4175-webserver</code> and attach to it (cf. steps 2 and 4 in the Docker basics part).</p>
</li>
<li>
<p>Within the container,</p>
<ul>
<li>Find out its IP address using tools you already know and note it in your report.</li>
<li>Navigate to the <code>/var/www</code> directory and confirm that the files you specified in the <code>COPY</code> part of the Dockerfile are present.</li>
<li>As in the web server exercise, launch a web server on port 80.</li>
<li>Open a web browser in your VM (not on your laptop) and navigate to the IP address of the container. What do you see? Take a screenshot and include it in your report.</li>
</ul>
</li>
<li>
<p>Stop and remove all running containers. Can you find a way of doing it with a single command? Search online!</p>
</li>
</ol>
</div><aside class="col-md-4 chunk ps-2"></aside></div>
</section>
  </main>



  <nav class="navbar navbar-expand-lg navbar-dark fixed-bottom" style="background-color: #555555">
    <div class="container-fluid">
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="https://www.ntnu.no/informasjonskapsler">Om informasjonskapsler</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.ntnu.no/personvern">Personvern</a>
          </li>
        </ul>
        <div class="bg-light ms-auto border-0"></div>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button"
              aria-controls="offcanvasExample">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-pencil-square" viewBox="0 0 16 16">
                <path
                  d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                <path fill-rule="evenodd"
                  d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasExample"
    aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Edit this page</h5>
    </div>
    <div class="offcanvas-body">
      <ul>
        <li>This site is hosted on <a href="https://github.com/falkr/ttm4175">Github</a></li>
        <li>The source is written in <a href="../supermark/index.html">Supermark</a> syntax</li>
        <li>To edit this page, make a commit to <a
            href="https://github.com/falkr/ttm4175/tree/master/pages/unit-net2/teamwork.md">this file</a></li>
      </ul>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
    var clipboard = new ClipboardJS('.copy-button');
  </script>
  <script>


</script>
</body>

</html>