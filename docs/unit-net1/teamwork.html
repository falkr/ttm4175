<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="generator" content="">
  <title>TTM4175</title>
  <link rel="canonical" href="https://edu.iik.ntnu.no">
  <!-- Bootstrap core CSS -->
  <link href="../assets/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../assets/style.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="../assets/anchor.js"></script>
  <script src="../assets/script-aside.js"></script>
  <script src="../assets/clipboard.min.js"></script>
  <style type="text/css">
    /* === boxes === */
div.box {
  padding: 10px;
  border-radius: 5px;
  position: relative;
  padding: 1rem 1rem 1rem 3.5rem;
}

div.box>p {
  margin-bottom: 0px;
}

div.box>*:first-child::before {
  font-family: bootstrap-icons !important;
  font-size: 1.5rem;
  padding: 0.8rem;
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  display: grid;
}

div.milestone {
  background-color: #E3BCDA;
}

div.milestone>*:first-child::before {
  content: '\f706';
  color: #75225E;
}

div.delivery {
  background-color: #ffd9ab;
}

div.delivery>*:first-child::before {
  content: '\f1be';
  color: #fc8c03;
}

div.definition {
  background-color: #EEE5D5;
}

div.definition>*:first-child::before {
  content: '\f3e9';
  color: #7D705A;
}

div.guideline {
  background-color: #fae7e8;
}

div.guideline>*:first-child::before {
  content: '\f548';
  color: #e45460;
}

div.report {
  background-color: #D6E5F0;
}

div.report>*:first-child::before {
  content: '\f43e';
  color: #1481b8;
}

div.warning {
  background-color: #ffd9ab;
}

div.warning>*:first-child::before {
  content: '\f33a';
  color: #fc8c03;
}

div.tip {
  background-color: #E3BCDA;
}

div.tip>*:first-child::before {
  content: '\f402';
  color: #75225E;
}

/* === figure === */
div.figure {
  padding: 20px 0 20px 0;
  width: 100%;
}

div.figurefullwitdth {
  padding: 20px 0 20px 0;
  margin-left: -33px;
  margin-right: -33px;
  width: 100%;
}

figcaption {
  color: #868279;
}

/* === goals === */
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f3cb';
  font-family: bootstrap-icons !important;
  font-size: 20;
  float: left;
  margin-left: -1.5em;
  color: #00509e;
}

/* === hints === */
.w3collapsible {
  background-color: #f0e9db;
  color: #868279;
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active,
.w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}

/* === steps === */
.steps ol, .steps ul {
  counter-reset: li;
  list-style: none;
  margin-left: 10px
}

.steps li {
  margin: 0 0 10px 0;
  min-height: 40px
}

.steps li:before {
  content: counter(li);
  counter-increment: li;
  border: 2px solid #868279;
  color: #868279;
  background-color: none;
  font-family: "Source Sans Pro", Georgia, serif;
  font-weight: bold;
  border-radius: 100%;
  text-align: center;
  display: inline-block;
  top:8px;
  left:-30px;
  width: 30px;
  height: 30px;
  position: relative;
  margin: -20px -10px -20px -20px
}


  </style>
</head>

<body>
  
  



<nav class="navbar navbar-expand-lg navbar shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand" href="https://ntnu.edu" title="NTNU Homepage">
      <img id="header_logo" alt="NTNU Hjemmeside" width="120px" src="https://www.ntnu.no/o/ntnu-theme/images/logo_ntnu.svg" height="23px">
    </a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon">
      	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
  			<path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
		</svg>
      </span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">TTM4175</a>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Teknostart
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../teknostart/index.html">Teknostart oversikt</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="../teknostart/day1.html">Teknostart Dag 1</a>
            <a class="dropdown-item" href="../teknostart/day2.html">Teknostart Dag 2</a>
            <a class="dropdown-item" href="../teknostart/day3.html">Teknostart Dag 3</a>
            <a class="dropdown-item" href="../teknostart/day4.html">Teknostart Dag 4</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Units
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../units.html">Oversikt</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="../unit-cli/index.html">Linux CLI</a>
            <a class="dropdown-item" href="../unit-net1/index.html">IPs, LAN</a>
            <a class="dropdown-item" href="../unit-net2/index.html">Ports, Web Servers</a>
            <a class="dropdown-item" href="../unit-net3/index.html">Routing, DNS</a>
            <a class="dropdown-item" href="../unit-p1/index.html">IoT and the Microbit</a>
            <a class="dropdown-item" href="../unit-p2/index.html">State Machines</a>
            <a class="dropdown-item" href="../unit-p3/index.html">HTTP and JSON</a>
            <a class="dropdown-item" href="../unit-p4/index.html">MQTT</a>
          </ul>
        </li>
        
        

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Learning
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../learning/learning.html">LÃ¦ring</a>
            <a class="dropdown-item" href="../learning/reports.html">Rapporter</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Tools
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../tools/index.html">Tools</a>
            <!--<a class="dropdown-item" href="../tools/tools-python.html">Python</a>-->
            <a class="dropdown-item" href="../tools/tools-gui.html">GUIs in Python</a>    
            <a class="dropdown-item" href="../tools/tools-mqtt.html">MQTT</a>            
            <a class="dropdown-item" href="../tools/tools-notebooks.html">Notebooks</a>
            <a class="dropdown-item" href="../tools/tools-stmpy.html">STMPY</a>            
          </ul>
        </li>
      </ul>
      <div class="bg-light border ms-auto"></div>
        <div>
        <a class="nav-link" href="../schedule.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
          <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
          <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
        </svg></a>
      </div>
    </div>
  </div>
</nav>






  <main class="container">

    <div class="row g-5 justify-content-md-center pb-5">



      <div class="col-md-9" style="margin-top: 6rem;">
        <div class="page">
    </section>
    <section class="content">
<h1>Networking I - Binary, IP Addresses, Subnets, LAN Configuration</h1>
<p>The overall goal of this lab is to consolidate knowledge on IP addressing and subnets.
This will be achieved using available networking tools in Linux to manage a simple Raspberry Pi network.</p>

<div class="goals"><p>After this lab you will be able to:</p>
<ul>
<li>Understand and apply basic binary arithmetic</li>
<li>Understand IP addresses and their organisation into subnets</li>
<li>Create and configure Local Area Networks (LANs)</li>
<li>Use basic Linux commands for managing:
<ul>
<li>IP addresses (IPv4 and IPv6)</li>
<li>IP subnets and masks</li>
</ul>
</li>
</ul>
</div>
    </section>
    <section class="content">
<h1>Pre-requisites for today</h1>
<p>Before continuing please check these two steps:</p>

<div class="steps"><ol>
<li>Make sure you have at least 20GB of disk space.</li>
<li>Confirm that you've downloaded the new VM image (<a href="https://filesender.uninett.no/?s=download&amp;token=a0ca6d46-2078-4984-a532-b68e3fd2cbaf">link</a>).</li>
</ol>
</div>
    </section>
    <section class="content">
<h1>Importing and configuring the Ubuntu VM</h1>

<div class="steps"><ol>
<li>Start by importing the newly downloaded VM just like you did for the RaspberryPI.</li>
<li>After the import is completed (it will take a few minutes), configure the settings of the new VM according to your computer specifications (for example, my laptop has only 8GB RAM so I configured my VM with 4GB).
You shouldn't use all the resources from your host machine in your VM as it can make things become less responsive.</li>
<li>Inside the VM settings go to <code>Network-&gt;Adapter 2</code> and configure it to be attached to an &quot;Internal Network&quot; as shown in the figure below.</li>
<li>Add a second adapter to the RaspberryPI VM, attach it to the same &quot;Internal Network&quot;.</li>
</ol>
</div>
<figure class="figure">
    <img src="figures/vbox2020/settings-internalnetwork.png" class="figure-img img-fluid rounded" alt="The internal network connecting the two VMs">
  <figcaption class="figure-caption">The internal network connecting the two VMs</figcaption>
</figure>
<div class="tip box mt-3 mb-3"><p>You can think of an &quot;internal network&quot; as a cable directly connecting VMs. This means they don't connect to the Internet or have any other features such as DHCP or NAT.</p>
<p>Another tip, if you want to access the Ubuntu VM through <code>ssh</code> (recommended) remember to add <em>port forwarding</em> on adapter one and choose a different <em>Host port</em> such as 2223.</p>
</div>
    </section>
    <section class="content">
<h1>Lab Exercises</h1>
<p>Please <strong>read each exercise</strong> entirely before starting to solve it.</p>
<p>Remember you should deliver a report after the networking module is finished.
It should include the main commands and configurations necessary to complete each exercise.
Do not forget to take notes while solving the exercises so you do not have to repeat them.</p>
<p>These exercises should be completed in teams.</p>

<h2>Quick overview of IP addresses</h2>
<p>By now you've already seen that IP addresses are an important part of the Internet and computer networks in general.
Before looking into more complicated setups, complete the following tasks and remember to include them in your report.</p>

<div class="steps"><ol>
<li>Start by finding the IP address of &lt;ntnu.no&gt;. For this you can use the command <code>host</code>.</li>
<li>Convert the found IP address to binary (you can use external tools!).</li>
<li>How many bytes does this IP address contain?</li>
<li>How many bits are there between each point (full stop) in the address 192.168.0.13?</li>
</ol>
</div>
<div class="tip box mt-3 mb-3"><p>Start your report now and keep updating it as you go! It doesn't have to look pretty but if you keep everything now (screenshots, notes, ...) you don't have to repeat it later.</p>
</div>
<h2>Networking two computers (VMs)</h2>

<figure class="figure">
    <img src="figures/net/TTM4175-ex1-2020.png" class="figure-img img-fluid rounded" alt="Diagram of the topology to be created">
  <figcaption class="figure-caption">Diagram of the topology to be created</figcaption>
</figure>
<p>The main goal of this exercise is to create a simple network between the two VMs through a simple network configuration as if they were connected by an Ethernet cable.</p>
<p>Remember you can edit configurations by directly using the VMs or, instead by simply using <code>ssh</code> from your host machine where you can have one or more terminals per VM.</p>

<h3>Configuring the network interfaces</h3>

<p><strong>---&gt; On your RPi VM</strong></p>
<p>Try the following steps:</p>

<div class="steps"><ol>
<li>Using the command <code>ip addr show dev eth1</code> find out your current IP address, if any, on 'eth1'</li>
<li>Type <code>ip addr help</code> to see all the available options</li>
<li>Let's now remove any unwanted address or routes on 'eth1' with the command:</li>
</ol>
</div>
<div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="idbe215f">ip addr flush dev eth1
</pre>
<button type="button" class="copy-button" data-clipboard-target="#idbe215f">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ip</span> addr flush dev eth1</span></code></pre></div>
</div>
<div class="steps"><ol start="4">
<li>Add an IP address and respective mask to the interface 'eth1' using the command:</li>
</ol>
</div>
<div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="idb8974d">ip addr add <your_chosen_ip_here>/<chosen_mask> dev eth1
</pre>
<button type="button" class="copy-button" data-clipboard-target="#idb8974d">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ip</span> addr add <span class="op">&lt;</span>your_chosen_ip_here<span class="op">&gt;</span>/<span class="op">&lt;</span>chosen_mask<span class="op">&gt;</span> dev eth1</span></code></pre></div>
</div>
<div class="tip box mt-3 mb-3"><p><strong>Note:</strong> you should avoid the subnet 10.0.2.0/24 as it already being used on 'eth0'.</p>
</div>
<div class="steps"><ol start="5">
<li>Using the command <code>ip a s eth1</code> (same as in step 1 but shorter) to verify your IP address, it should be the one you have just set.</li>
<li>Use the command <code>ip link set up dev eth1</code> to &quot;turn on&quot; the interface, in case it is down.</li>
</ol>
</div>
<p><strong>---&gt; On your Ubuntu VM</strong></p>
<p>Repeat the configurations above, paying attention to the different interface notation and assigning a new IP address:</p>

<div class="steps"><ol>
<li>Remove any address/route on the interface 'enp0s8' (e-n-p-zero-s-eight).</li>
<li>Add a different IP address and mask to the interface 'enp0s8' such that it is in the same subnet as 'eth1' on the RPi.</li>
<li>Use the command <code>ip l s up dev enp0s8</code> to set the interface to &quot;UP&quot;.</li>
<li>How many addresses does the chosen subnet contain?</li>
</ol>
</div>
<div class="tip box mt-3 mb-3"><p>Remember that one IP address can only be used by a single interface in the same network! It should be unique.</p>
<p>The size of the subnet depends on the number of bits used on the corresponding mask.</p>
</div>
<p>Spoiler alert! Before clicking the box below try to solve the exercise on your own but of course you are free to check it out.</p>

<button class="w3collapsible">Hint (IP addresses)</button>
<div class="w3content">
<p>You can use &quot;any&quot; private IP address in the ranges:</p>
<ul>
<li>10.0.0.0/8</li>
<li>172.16.0.0/12</li>
<li>192.168.0.0/16</li>
</ul>
<p><strong>Note:</strong> you can't use the first nor the last IP address of a network/subnet. So, for example, for the network 10.12.1.0/24 you cannot use the addresses 10.12.1.0 nor 10.12.1.255 (remember that /24 corresponds to an 8 bit mask or 255.255.255.0).</p>
<p>An example of a pair of IP addresses and masks could be &quot;10.100.2.1/30&quot; and &quot;10.100.2.2/30&quot;.</p>
<p><strong>Remember:</strong> you need to have &quot;root&quot; privileges in order to change/add an IP address.</p>

</div>
<h3>Verifying your configurations</h3>
<p>After configuring the two VMs continue with the following steps:</p>

<div class="steps"><ol>
<li>On one of the VMs use the command <code>ip route</code> to see the added route. Which one is the new entry?</li>
<li>Verify that both nodes have connectivity with the <code>ping</code> command. First from the RPi and afterwards from the Ubuntu machine.</li>
<li>Make sure you can connect to the RPi from the Ubuntu machine using <code>ssh</code>.</li>
<li>From one of the VMs <code>ping</code> &lt;ntnu.no&gt;. What's the main difference in behaviour that you can see?</li>
</ol>
</div>
<p>Spoiler ahead...</p>

<button class="w3collapsible">Hint (ping)</button>
<div class="w3content">
<p>Use the command <code>ping</code> like this to generate only 4 ICMP messages.</p>
<pre><code class="language-bash">ping -c4 &lt;ip_address&gt;
</code></pre>
<p>And note the round-trip <strong>time</strong> of each message...</p>

</div>
<h2>Experimenting with masks</h2>
<p>The goal of this task is to get more comfortable with subnets and masks and see how they work in practice.
If you have questions about why something happens, or does not happen, feel free to ask!</p>
<p><strong>---&gt; On your RPi VM</strong></p>

<div class="steps"><ol>
<li>Change the IP address of 'eth1' to 10.10.10.30 using the mask 255.255.255.192 (first add a new address then delete the previous one).</li>
<li>Verify if you still have connectivity and discuss why or why not.</li>
</ol>
</div>
<button class="w3collapsible">Hint (troubleshooting)</button>
<div class="w3content">
<p>You may lose connectivity at this point depending on the IP addresses you have previously chosen.</p>

</div>
<p><strong>---&gt; On your Ubuntu VM</strong></p>
<p>Now, on your Ubuntu VM make the following changes:</p>

<div class="steps"><ol>
<li>Change the IP address of 'enp0s8' to 10.10.10.5 using the mask 255.255.255.192 (first add a new address then delete the previous one).</li>
<li>Check for changes in connectivity between the two VMs. Can one VM still <code>ping</code> the other?</li>
<li>Using the same IP address change the mask to '/30'.</li>
<li>Check for changes in connectivity between the two VMs.</li>
<li>Using the same IP address, what is the smallest subnet size, and corresponding mask, that you can use to maintain connectivity between the two VMs? Why?</li>
</ol>
</div>
<div class="tip box mt-3 mb-3"><p><strong>About the report</strong> You don't have to include all the commands you needed to type, <strong>it is enough to discuss/explain</strong> the changes in connectivity and the choices you made.</p>
</div>
<span name="9039a8"></span><aside name="9039a8"><p>You don't need to reboot your RPi to apply these settings, it's enough to restart the networking service but you need to type a bit more (e.g. <code>sudo ip link set eth1 down &amp;&amp; sudo ip link set eth1 up</code> <strong>or</strong> <code>service networking restart</code>).</p>
</aside>
<h2>Static IP addresses</h2>
<p>In order to permanently save your IP configuration, so that they are persistent even after a reboot, you need to save it.
However, this is done differently in different Linux systems.
Below you'll see how to do it in Raspbian and Ubuntu.</p>
<p><strong>---&gt; On your RPi VM</strong></p>
<p>To save your settings you need to edit the &quot;dhcpcd.conf&quot; file in <code>/etc/</code> (don't forget to check if you have permissions).
Edit this file and reboot to check the networking configurations have remained.</p>

<p>Example configuration (change accordingly!):</p>

<div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="id203452">interface eth1
static ip_address=192.168.100.102/24
static routers=192.168.100.101
</pre>
<button type="button" class="copy-button" data-clipboard-target="#id203452">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="at">interface eth1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">static ip_address=192.168.100.102/24</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">static routers=192.168.100.101</span></span></code></pre></div>
</div>
<p><strong>---&gt; On your Ubuntu VM</strong></p>
<p>To save your settings you need to edit the &quot;01-network-manager-all.yaml&quot; file in <code>/etc/netplan</code>.
After editing you can apply your changes with the command <code>sudo netplan apply</code>:</p>
<p>Example configuration (change accordingly!):</p>

<div class="source-code-frame mt-3 mb-3">
<pre class="d-none" id="idd5d260">network:
    version: 2
    renderer: networkd
    ethernets:
        enp0s3:
            dhcp4: yes
            nameservers:
                addresses: [8.8.4.4,8.8.8.8]
        enp0s8:
            dhcp4: no
            addresses:
                - 10.0.20.2/24
</pre>
<button type="button" class="copy-button" data-clipboard-target="#idd5d260">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
  		<path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
  		<path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
	</svg>
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">network</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">renderer</span><span class="kw">:</span><span class="at"> networkd</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ethernets</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">enp0s3</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">dhcp4</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">nameservers</span><span class="kw">:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">addresses</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="fl">8.8.4.4</span><span class="kw">,</span><span class="fl">8.8.8.8</span><span class="kw">]</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">enp0s8</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">dhcp4</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">addresses</span><span class="kw">:</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="kw">-</span><span class="at"> 10.0.20.2/24</span></span></code></pre></div>
</div>
<div class="tip box mt-3 mb-3"><p>Be careful with the indentation! Use spaces to align or copy-paste exactly as shown (change the addresses as needed).</p>
</div>
    </section>
    <section class="content">
<h1>Optional Exercises</h1>
<h2>Introducing IPv6</h2>
<p>Change the topology you created in <a href="#lab.-exercises">the previous exercise</a> to use IPv6 addresses and try:</p>
<ul>
<li>the <code>ping</code> command</li>
<li>remote access with <code>ssh</code></li>
<li>different subnets</li>
</ul>

<button class="w3collapsible">Hint</button>
<div class="w3content">
<p>Note that some commands require additional arguments to handle IPv6 (check their documentation).</p>

</div>
<h2>More SSH</h2>
<p>The goal of this exercise is to show you how <code>ssh</code> handles sessions.</p>

<div class="steps"><ol>
<li>Using the internal network interface, connect both VMs have connectivity with each other, using the <code>ping</code> command.</li>
<li>Connect to the RPi from the Ubuntu VM using <code>ssh</code> with the option &quot;-o ServerAliveInterval=5&quot; and the remaining needed parameters.</li>
<li>In the RPi <code>ssh</code> session run the &quot;Alive&quot; command:</li>
</ol>
</div>
<ul>
<li><code>python -c $'import time\nwhile True: print(&quot;Alive!&quot;); time.sleep(5)'</code></li>
</ul>

<div class="steps"><ol start="4">
<li>Now, your RPi VM directly (on another terminal window), set the 'eth1' interface down (<code>ip l s eth1 down</code>) and wait for an error message on your <code>ssh</code> connection (it should take less than 1 min.).</li>
<li>After the error message, set 'eth1' up again, re-establish the <code>ssh</code> session and verify if the command is still running using the <code>ps</code> command.</li>
<li>Find a way to repeat the &quot;Alive&quot; command in the RPi making sure it is not interrupted if the connection fails (<strong>this will require some research or check the hint below</strong>).</li>
</ol>
</div>
<div class="tip box mt-3 mb-3"><p>If a command such as <code>ps</code> outputs too much information you can use the Unix pipeline principles to manage the output.
For example <code>ps aux | grep desired_pattern</code>.</p>
</div>
<p>If you couldn't figure out step 6. above you can see a hint below.</p>

<button class="w3collapsible">Hint (ssh)</button>
<div class="w3content">
<p>To keep programs running even if there's a connection interruption you can use the commands <code>screen</code>, <code>tmux</code> or simply run them on the background.</p>

</div>
    </section>
</div>
      </div>




    </div>

  </main>
<nav class="navbar navbar-expand-lg navbar-dark fixed-bottom" style="background-color: #555555">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="https://www.ntnu.no/informasjonskapsler">Om informasjonskapsler</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.ntnu.no/personvern">Personvern</a>
          </li>
        </ul>
        <div class="bg-light ms-auto border-0"></div>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Edit this page</h5>
    </div>
    <div class="offcanvas-body">
      <ul>
        <li>This site is hosted on <a href="https://github.com/falkr/ttm4175">Github</a></li>
        <li>The source is written in <a href="../supermark/index.html">Supermark</a> syntax</li>
        <li>To edit this page, make a commit to <a href="https://github.com/falkr/ttm4175/tree/master/pages/unit-net1/teamwork.md">this file</a></li>
      </ul>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
    var clipboard = new ClipboardJS('.copy-button');
  </script>
  <script>
    





  </script>
</body>

</html>